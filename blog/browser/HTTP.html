<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP、HTTPS与HTTP2 | 幸湘</title>
    <meta name="description" content="幸湘的博客">
    <link rel="icon" href="./public/image/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.5c2ae73b.css" as="style"><link rel="preload" href="/assets/js/app.ab7145cf.js" as="script"><link rel="preload" href="/assets/js/2.85147661.js" as="script"><link rel="preload" href="/assets/js/10.5890ca08.js" as="script"><link rel="prefetch" href="/assets/js/11.3d9cf837.js"><link rel="prefetch" href="/assets/js/12.3df023dd.js"><link rel="prefetch" href="/assets/js/13.550f62fd.js"><link rel="prefetch" href="/assets/js/14.e0728202.js"><link rel="prefetch" href="/assets/js/15.9b749930.js"><link rel="prefetch" href="/assets/js/16.feeba172.js"><link rel="prefetch" href="/assets/js/17.7591929d.js"><link rel="prefetch" href="/assets/js/18.f84af26d.js"><link rel="prefetch" href="/assets/js/19.f77ae857.js"><link rel="prefetch" href="/assets/js/3.04624b6a.js"><link rel="prefetch" href="/assets/js/4.beec2cf0.js"><link rel="prefetch" href="/assets/js/5.d485f776.js"><link rel="prefetch" href="/assets/js/6.725315dd.js"><link rel="prefetch" href="/assets/js/7.1b3180b0.js"><link rel="prefetch" href="/assets/js/8.c168fcd9.js"><link rel="prefetch" href="/assets/js/9.1470d827.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5c2ae73b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">幸湘</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="https://github.com/JessieHu27" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="https://github.com/JessieHu27" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js/JavaScript继承.html" class="sidebar-link">JavaScript继承</a></li><li><a href="/blog/js/JavaScript函数相关.html" class="sidebar-link">JavaScript函数相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css/CSS篇（一）.html" class="sidebar-link">CSS篇（一）</a></li><li><a href="/blog/css/CSS篇（二）.html" class="sidebar-link">CSS篇（二）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>浏览器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/browser/缓存.html" class="sidebar-link">缓存</a></li><li><a href="/blog/browser/跨域.html" class="sidebar-link">跨域</a></li><li><a href="/blog/browser/HTTP.html" class="active sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/browser/HTTP.html#http1-0与http1-1" class="sidebar-link">HTTP1.0与HTTP1.1</a></li><li class="sidebar-sub-header"><a href="/blog/browser/HTTP.html#https" class="sidebar-link">HTTPS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/browser/HTTP.html#证书获得的过程" class="sidebar-link">证书获得的过程</a></li><li class="sidebar-sub-header"><a href="/blog/browser/HTTP.html#ca证书的内容" class="sidebar-link">CA证书的内容</a></li><li class="sidebar-sub-header"><a href="/blog/browser/HTTP.html#https请求的过程" class="sidebar-link">HTTPS请求的过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/browser/HTTP.html#http2的新特性" class="sidebar-link">HTTP2的新特性</a></li></ul></li><li><a href="/blog/browser/TCP.html" class="sidebar-link">TCP</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http、https与http2"><a href="#http、https与http2" class="header-anchor">#</a> HTTP、HTTPS与HTTP2</h1> <h2 id="http1-0与http1-1"><a href="#http1-0与http1-1" class="header-anchor">#</a> HTTP1.0与HTTP1.1</h2> <p>HTTP1.0最早在网页中使用是在1996年，那个时候只是使用一些较为简单的网页上和网络请求上，而HTTP1.1则在1999年才开始广泛应用于现在的各大浏览器网络请求中，同时HTTP1.1也是当前使用最为广泛的HTTP协议。 主要区别主要体现在：</p> <ul><li><p><strong>缓存处理</strong>，在HTTP1.0中主要使用header里的If-Modified-Since,Expires,Pragam来做为缓存判断的标准，HTTP1.1则引入了更多的缓存控制策略例如Entity tag，If-Unmodified-Since, If-Match, If-None-Match等更多可供选择的缓存头来控制缓存策略。</p></li> <li><p><strong>带宽优化及网络连接的使用</strong>，HTTP1.0中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送过来了，并且不支持断点续传功能，HTTP1.1则在请求头引入了range头域，它允许只请求资源的某个部分，即返回码是206（Partial Content），这样就方便了开发者自由的选择以便于充分利用带宽和连接。</p></li> <li><p><strong>错误通知的管理</strong>，在HTTP1.1中新增了24个错误状态响应码，如409（Conflict）表示请求的资源与资源的当前状态发生冲突；410（Gone）表示服务器上的某个资源被永久性的删除。</p></li> <li><p><strong>Host头处理</strong>，在HTTP1.0中认为每台服务器都绑定一个唯一的IP地址，因此，请求消息中的URL并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web  Servers），并且它们共享一个IP地址。HTTP1.1的请求消息和响应消息都应支持Host头域，且请求消息中如果没有Host头域会报告一个错误（400 Bad Request）。</p></li> <li><p><strong>长连接</strong>，HTTP  1.1支持长连接（PersistentConnection）和请求的流水线（Pipelining）处理，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟，在HTTP1.1中默认开启Connection： keep-alive，一定程度上弥补了HTTP1.0每次请求都要创建连接的缺点。</p></li></ul> <h2 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h2> <p>HTTPS是在HTTP上建立SSL加密层，并对传输数据进行加密，是HTTP协议的安全版。HTTPS主要作用是：</p> <ul><li>对数据进行加密，并建立一个信息安全通道，来保证传输过程中的数据安全</li> <li>对网站服务器进行真实身份认证</li></ul> <h3 id="证书获得的过程"><a href="#证书获得的过程" class="header-anchor">#</a> 证书获得的过程</h3> <ol><li><p>服务方S向第三方机构CA提交公钥、组织信息、个人信息(域名)等信息并申请认证</p></li> <li><p>CA通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业是否合法，是否拥有域名的所有权等</p></li> <li><p>如信息审核通过，CA会向申请者签发认证文件-证书</p></li></ol> <h3 id="ca证书的内容"><a href="#ca证书的内容" class="header-anchor">#</a> CA证书的内容</h3> <ul><li>包含申请者公钥、申请者的组织信息和个人信息、签发机构、CA的信息、有效时间、证书序列号等信息的明文</li> <li>数字签名（ 签名的产生算法：首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用 CA的私钥对信息摘要进行加密，密文即签名）</li></ul> <h3 id="https请求的过程"><a href="#https请求的过程" class="header-anchor">#</a> HTTPS请求的过程</h3> <ol><li>客户端 C 向服务器 S 发出请求时，S 返回证书文件;</li> <li>客户端 C读取证书中的相关的明文信息，采用相同的散列函数计算得到信息摘要，然后，利用对应 CA的公钥解密签名数据，对比证书的信息摘要，如果一致，则可以确认证书的合法性，即公钥合法;</li> <li>客户端然后验证证书相关的域名信息、有效时间等信息; 如果证书验证通过也开始发起https请求，否则会提示用户证书不安全</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>客户端会内置信任CA的证书信息(包含公钥)，如果CA不被信任，则找不到对应 CA的证书，证书也会被判定非法。</p></div> <h2 id="http2的新特性"><a href="#http2的新特性" class="header-anchor">#</a> HTTP2的新特性</h2> <ul><li><p><strong>新的二进制格式</strong>（Binary Format），HTTP1.x  的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认 0 和 1  的组合。基于这种考虑 HTTP2.0 的协议解析决定采用二进制格式，实现方便且健壮。</p></li> <li><p><strong>多路复用</strong>（MultiPlexing），即连接共享，即每一个 request 都是是用作连接共享机制的。一个 request 对应一个 id，这样一个连接上可以有多个 request，每个连接的 request 可以随机的混杂在一起，接收方可以根据  request 的 id 将 request 再归属到各自不同的服务端请求里面。</p></li> <li><p><strong>header 压缩</strong>，如上文中所言，对前面提到过 HTTP1.x 的 header  带有大量信息，而且每次都要重复发送，HTTP2.0 使用 encoder 来减少需要传输的 header 大小，通讯双方各自 cache 一份  header fields 表，既避免了重复 header 的传输，又减小了需要传输的大小。</p></li> <li><p><strong>服务端推送</strong>（server push）</p></li></ul> <p>参考：</p> <ul><li><p><a href="https://juejin.im/post/5af557a3f265da0b9265a498#heading-37" target="_blank" rel="noopener noreferrer">HTTP和HTTPS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://mp.weixin.qq.com/s/StqqafHePlBkWAPQZg3NrA" target="_blank" rel="noopener noreferrer">一个故事讲完HTTPS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/browser/跨域.html" class="prev">跨域</a></span> <span class="next"><a href="/blog/browser/TCP.html">TCP</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ab7145cf.js" defer></script><script src="/assets/js/2.85147661.js" defer></script><script src="/assets/js/10.5890ca08.js" defer></script>
  </body>
</html>
